<project default="build-parsers">
	
	<target name="build-parsers">
		<mkdir dir="src/antlr/cc/warlock/script/wsl"/>
		<mkdir dir="src/antlr/cc/warlock/stormfront/internal"/>
			
		<antcall target="build-grammar">
			<param name="grammar-file" value="cc/warlock/script/wsl/WSL.g3"/>
			<param name="lib-dir" value="cc/warlock/script/wsl"/>
		</antcall>
		
		<mkdir dir="src/javacc/cc/warlock/stormfront/internal"/>
		<antcall target="javacc">
			<param name="arguments" value="-OUTPUT_DIRECTORY:src/javacc/cc/warlock/stormfront/internal -STATIC:false"/>
			<param name="grammar-file" value="src/main/cc/warlock/stormfront/internal/stormfront.jj"/>
		</antcall>
	</target>
	
	<target name="javacc">
		<java classname="javacc">
			<classpath>
				<fileset file="lib/javacc.jar"/>
			</classpath>
			<arg line="${arguments}"/>
			<arg line="${grammar-file}"/>
		</java>
	</target>
	
	<target name="build-grammar" >
		<java classname="org.antlr.Tool" fork="true" dir="src/main">
			<classpath>
				<fileset dir="lib">
					<include name="antlr-*.jar"/>
					<include name="stringtemplate*.jar"/>
				</fileset>
			</classpath>
			<arg line="-o ../../src/antlr"/>
			<arg line="-lib ../../src/antlr/${lib-dir}"/>
			<arg value="${grammar-file}"/>
		</java>
	</target>
</project>